var RightsArray = new Array();
var obj = {};
obj.id = "AddNew";
obj.field = "acc_add";
RightsArray[1] = obj;


obj = {};
obj.id = "View";
obj.field = "acc_can_view";
RightsArray[2] = obj;

obj = {};
obj.id = "Modify";
obj.field = "acc_edit";
RightsArray[3] = obj;

obj = {};
obj.id = "Delete";
obj.field = "acc_delete";
RightsArray[4] = obj;

obj = {};
obj.id = "CreateActivity";
obj.field = "acc_create_activity";
RightsArray[5] = obj;

obj = {};
obj.id = "AddIndustry";
obj.field = "acc_industry";
RightsArray[6] = obj;

obj = {};
obj.id = "ContactPerson";
obj.field = "acc_contact_person";
RightsArray[7] = obj;

obj = {};
obj.id = "History";
obj.field = "acc_history";
RightsArray[8] = obj;

obj = {};
obj.id = "AddUpdateDocuments";
obj.field = "acc_addupdate_documents";
RightsArray[9] = obj;

obj = {};
obj.id = "Members";
obj.field = "acc_members";
RightsArray[10] = obj;


obj = {};
obj.id = "OpeningUpdate";
obj.field = "acc_opening_addupdate";
RightsArray[11] = obj;

obj = {};
obj.id = "AssetDetails";
obj.field = "acc_asset_details";
RightsArray[12] = obj;

obj = {};
obj.id = "Export";
obj.field = "acc_Export";
RightsArray[13] = obj;
 

obj = {};
obj.id = "Print";
obj.field = "acc_Print";
RightsArray[14] = obj;

obj = {};
obj.id = "Budget";
obj.field = "acc_Budget";
RightsArray[15] = obj;

obj = {};
obj.id = "AssignBranch";
obj.field = "acc_Branchassign";
RightsArray[16] = obj;
   


obj = {};
obj.id = "CancelAssignment";
obj.field = "acc_cancelassign";
RightsArray[17] = obj;

obj = {};
obj.id = "ReassignSupervisor";
obj.field = "acc_CanReassignSupervisor";
RightsArray[18] = obj;

obj = {};
obj.id = "Close";
obj.field = "acc_can_close";
RightsArray[19] = obj;

obj = {};
obj.id = "SpecialEdit";
obj.field = "acc_SpecialEdit";
RightsArray[20] = obj;

obj = {};
obj.id = "CreateOrder";
obj.field = "acc_CreateOrder";
RightsArray[22] = obj;

obj = {};
obj.id = "Cancel";
obj.field = "acc_cancel";
RightsArray[21] = obj;

obj = {};
obj.id = "ImageUpload";
obj.field = "acc_imageupload";
RightsArray[23] = obj;

obj = {};
obj.id = "RePrintBarcode";
obj.field = "acc_reprintBarcode";
RightsArray[24] = obj;

obj = {};
obj.id = "DocumentCollection";
obj.field = "acc_DocumentCollection";
RightsArray[25] = obj;
   
obj = {};
obj.id = "ClosedSales";
obj.field = "acc_ClosedSales";
RightsArray[26] = obj;
 
obj = {};
obj.id = "FutureSales";
obj.field = "acc_FutureSales";
RightsArray[27] = obj;

obj = {};
obj.id = "ClarificationRequired";
obj.field = "acc_ClarificationRequired";
RightsArray[28] = obj;
  
obj = {};
obj.id = "ReassignSalesman";
obj.field = "acc_CanReassignSalesman";
RightsArray[29] = obj;
 
obj = {};
obj.id = "ViewAdjustment";
obj.field = "acc_ViewAdjustment";
RightsArray[30] = obj;




obj = {};
obj.id = "SupervisorFeedback";
obj.field = "SupervisorFeedback";
RightsArray[31] = obj;

obj = {};
obj.id = "SalesmanFeedback";
obj.field = "SalesmanFeedback";
RightsArray[32] = obj;

obj = {};
obj.id = "Verified";
obj.field = "Verified";
RightsArray[33] = obj;

obj = {};
obj.id = "Influencer";
obj.field = "Influencer";
RightsArray[34] = obj;


obj = {};
obj.id = "Restore";
obj.field = "acc_Restore";
RightsArray[35] = obj;

obj = {};
obj.id = "AssignTo";
obj.field = "AssignTo";
RightsArray[36] = obj;

obj = {};
obj.id = "ConvertTo";
obj.field = "ConvertTo";
RightsArray[37] = obj;

obj = {};
obj.id = "SalesActivity";
obj.field = "SalesActivity";
RightsArray[38] = obj;

obj = {};
obj.id = "Approved";
obj.field = "acc_Approved";
RightsArray[39] = obj;






obj = {};
obj.id = "Qualify";
obj.field = "acc_Qualify";
RightsArray[40] = obj;

obj = {};
obj.id = "CancelLost";
obj.field = "acc_CancelLost";
RightsArray[41] = obj;

obj = {};
obj.id = "Sharing";
obj.field = "acc_Sharing";
RightsArray[42] = obj;

obj = {};
obj.id = "Products";
obj.field = "acc_Products";
RightsArray[43] = obj;

obj = {};
obj.id = "Literature";
obj.field = "acc_Literature";
RightsArray[44] = obj;


obj = {};
obj.id = "ReadyToInvoice";
obj.field = "acc_ReadyToInvoice";
RightsArray[45] = obj;

obj = {};
obj.id = "MakeInvoice";
obj.field = "acc_MakeInvoice";
RightsArray[46] = obj;

obj = {};
obj.id = "UpdateTransporter";
obj.field = "acc_UpdateTransporter";
RightsArray[47] = obj;

obj = {};
obj.id = "IRN";
obj.field = "acc_IRN";
RightsArray[48] = obj;

obj = {};
obj.id = "EWayBill";
obj.field = "acc_EWayBill";
RightsArray[49] = obj;

obj = {};
obj.id = "MRCancellation";
obj.field = "acc_MRCancellation";
RightsArray[50] = obj;

obj = {};
obj.id = "WRCancellation";
obj.field = "acc_WRCancellation";
RightsArray[51] = obj;

obj = {};
obj.id = "STBRequisition";
obj.field = "acc_STBRequisition";
RightsArray[52] = obj;

obj = {};
obj.id = "Holds";
obj.field = "acc_Holds";
RightsArray[53] = obj;

obj = {};
obj.id = "DirectorApproval";
obj.field = "acc_DirectorApproval";
RightsArray[54] = obj;

obj = {};
obj.id = "InventoryCancellation";
obj.field = "acc_InventoryCancellation";
RightsArray[55] = obj;

obj = {};
obj.id = "AddReturn";
obj.field = "acc_AddReturn";
RightsArray[56] = obj;

obj = {};
obj.id = "PendingDispatch";
obj.field = "acc_PendingDispatch";
RightsArray[57] = obj;

obj = {};
obj.id = "DispatchAcknowledgment";
obj.field = "acc_DispatchAcknowledgment";
RightsArray[58] = obj;

// Mantis Issue 24211
obj = {};
obj.id = "CreateOpportunities";
obj.field = "acc_CreateOpportunities";
RightsArray[59] = obj;

obj = {};
obj.id = "AutoCloseOpportunities";
obj.field = "acc_AutoCloseOpportunities";
RightsArray[60] = obj;

obj = {};
obj.id = "CloseOpportunities";
obj.field = "acc_CloseOpportunities";
RightsArray[61] = obj;

obj = {};
obj.id = "ReopenOpportunities";
obj.field = "acc_ReopenOpportunities";
RightsArray[62] = obj;
// End of Mantis Issue 24211
// Mantis Issue 24893
obj = {};
obj.id = "TotalAssigned";
obj.field = "acc_TotalAssigned";
RightsArray[63] = obj;

obj = {};
obj.id = "RepairingPending";
obj.field = "acc_RepairingPending";
RightsArray[64] = obj;

obj = {};
obj.id = "ServiceEntered";
obj.field = "acc_ServiceEntered";
RightsArray[65] = obj;

obj = {};
obj.id = "ServicePending";
obj.field = "acc_ServicePending";
RightsArray[66] = obj;
// End of Mantis Issue 24893

obj = {};
obj.id = "QuotationStatus";
obj.field = "acc_QuotationStatus";
RightsArray[67] = obj;

obj = {};
obj.id = "ReOpen";
obj.field = "acc_ReOpen";
RightsArray[68] = obj;

//Mantis Issue 25087
obj = {};
obj.id = "SendSMS";
obj.field = "acc_SendSMS";
RightsArray[69] = obj;
//End of Mantis Issue 25087

//Mantis Issue 25087
obj = {};
obj.id = "UpdatePartyInvNoDT";
obj.field = "acc_UpdatePartyInvNoDT";
RightsArray[70] = obj;
//End of Mantis Issue 25087

function AddEditRights(id, lbl2, lbl3) {
    if (lbl3)
        $('#modName').text(lbl3);
    else
        $('#modName').text(lbl2);


    MainMenuId = id;
    var OtherDetails = {}
    OtherDetails.MenuId = id;
    OtherDetails.GroupId = $('#HdGroupId').val();
    $.ajax({
        type: "POST",
        url: "MenuUserRights.aspx/GetMenuRightsControl",
        data: JSON.stringify(OtherDetails),
        contentType: "application/json; charset=utf-8",
        dataType: "json",
        success: function (msg) {
            var returnObjectRights = msg.d.rightsName;

            $('#RightsModel').modal('show');
            uncheckAllAndHide();
            for (var i = 0; i < returnObjectRights.length; i++) {
                if (returnObjectRights[i] && RightsArray[returnObjectRights[i].Id]) {
                $('#' + RightsArray[returnObjectRights[i].Id].id).parent().parent().show();
                $('#' + RightsArray[returnObjectRights[i].Id].id).show();
                $('#l' + RightsArray[returnObjectRights[i].Id].id).show();
            }

            }




            for (var i = 0; i < msg.d.hasSelect.length; i++) {
                if(document.getElementById(msg.d.hasSelect[i]).style.display !='none')
                    document.getElementById(msg.d.hasSelect[i]).checked = true;
            }

        }
    });

}

function uncheckAllAndHide() {

    for (var i = 1; i < RightsArray.length; i++) {
        if (RightsArray[i]) {
            document.getElementById(RightsArray[i].id).checked = false;
            $('#' + RightsArray[i].id).parent().parent().hide();
            $('#' + RightsArray[i].id).hide();
            $('#l' + RightsArray[i].id).hide();
            
        }
    }




}
function AfterExport()
{
    $("#hdnExportValue").val($("#drdExport").val());
    $("#drdExport").val("0");
}

function OnSaveClick() {
    var selectedVal = '';
    for (var i = 1; i < RightsArray.length; i++) {
        if (RightsArray[i]) {
            if (document.getElementById(RightsArray[i].id).checked) {
                selectedVal = selectedVal  + RightsArray[i].field+ ',';
            }
        }
    }

    var OtherDetails = {}
    OtherDetails.MenuId = MainMenuId;
    OtherDetails.GroupId = $('#HdGroupId').val();
    OtherDetails.FieldList = selectedVal.replace(/,\s*$/, "");
    $.ajax({
        type: "POST",
        url: "MenuUserRights.aspx/SaveRights",
        data: JSON.stringify(OtherDetails),
        contentType: "application/json; charset=utf-8",
        dataType: "json",
        success: function (msg) {
            cGridRights.Refresh();
            $('#RightsModel').modal('hide');
            showCustomNewNotify('Saved Successfully.');
        }
    });

}



function SelectAll() {

    for (var i = 0; i < RightsArray.length; i++) {
        if (RightsArray[i] && document.getElementById(RightsArray[i].id).style.display != 'none') {
            document.getElementById(RightsArray[i].id).checked = true;
        }
    }
}


function deselectALl() {

    for (var i = 0; i < RightsArray.length; i++) {
        if (RightsArray[i] && document.getElementById(RightsArray[i].id).style.display != 'none') {
            document.getElementById(RightsArray[i].id).checked = false;
        }  
    }
}


function TaggedAll() {

    jConfirm('Are you sure?', 'Alert', function (e) {
        if (e == true) {
            showCustomNewNotify('Updating..');
            var OtherDetails = {}
            OtherDetails.GroupId = $('#HdGroupId').val();
            $.ajax({
                type: "POST",
                url: "MenuUserRights.aspx/TaggedAll",
                data: JSON.stringify(OtherDetails),
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                success: function (msg) {
                    cGridRights.Refresh();
                    showCustomNewNotify('Successfully Assigned All Right(s).');
                }
            });
        }
    });



 
}

function UnTaggedAll() {
    jConfirm('Are you sure?', 'Alert', function (e) {
        var OtherDetails = {}
        OtherDetails.GroupId = $('#HdGroupId').val();
        $.ajax({
            type: "POST",
            url: "MenuUserRights.aspx/UnTaggedAll",
            data: JSON.stringify(OtherDetails),
            contentType: "application/json; charset=utf-8",
            dataType: "json",
            success: function (msg) {
                cGridRights.Refresh();
                showCustomNewNotify('Successfully Revoked All Right(s).');
            }
        });
    });
     
   
}
 
function showCustomNewNotify(text) {
    var x = document.getElementById("CustomNewNotify");
    x.innerHTML = text;
    x.className = "show";
    setTimeout(function () { x.className = x.className.replace("show", ""); }, 6000);
}
