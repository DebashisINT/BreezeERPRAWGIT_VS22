@{
    ViewBag.Title = "EmpReimbursement";
    Layout = "~/Areas/EmployeeSelfService/Views/Shared/_Layout.cshtml";
}
<link href="~/Areas/EmployeeSelfService/Resources/lib/typicons.font/typicons.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/jquery-confirm/3.3.2/jquery-confirm.min.css">
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-confirm/3.3.2/jquery-confirm.min.js"></script>
<style>
    .red {
        color:red;
    }
</style>
<script>
    $.ajax({
        type: "POST",
        url: "/EmployeeSelfService/Api/UserInfo/getInfo",
        contentType: "application/json; charset=utf-8",
        data: JSON.stringify({
            "UserId": '@Session["userid"]'
        }),
        dataType: "json",
        success: function (data) {
            console.log(data);
            var dateSplitDOB = data.userinfo.dateOfBirth.split(" ")[0];
            var dateSplitJOIN = data.userinfo.emp_dateofJoining.split(" ")[0];
            var firstLetter = data.userinfo.Name.slice(0, 1).toUpperCase();
            $(".firstL, .firstLs").text(firstLetter);
            var rand = ['0', '1', '2', '3', '4', '5', '6', '7', '8', '9', 'a', 'b', 'c', 'd', 'e', 'f'];
            var color = '#' + rand[Math.ceil(Math.random() * 15)] + rand[Math.ceil(Math.random() * 15)] + rand[Math.ceil(Math.random() * 15)] + rand[Math.ceil(Math.random() * 15)] + rand[Math.ceil(Math.random() * 15)] + rand[Math.ceil(Math.random() * 15)];
            var back = ["#ff0000", "blue", "gray"];
            //var rand = back[Math.floor(Math.random() * back.length)];
            $('.firstL').css('background', color);
            $(".userNameIntro").text(data.userinfo.Name.split(" ")[0]);
            $(".userName").text(data.userinfo.Name);
            $(".desg").text(data.userinfo.deg_designation);
            $("#empCode").text(data.userinfo.empCode);
            $("#dob").text(dateSplitDOB);
            $("#dateSplitJOIN").text(dateSplitJOIN);
            $("#reportingManager").text(data.userinfo.reportingManager);
        }
    });

    function getList(status, mm, yyyy) {
        $.ajax({
            type: "POST",
            url: "/EmployeeSelfService/Api/ReimbursementAPI/GetRMLIST",
            contentType: "application/json; charset=utf-8",
            data: JSON.stringify({
                "EMP_CODE": '@Session["usercontactID"]',
                "STATUS": status,
                "MM": mm,
                "YYYY": yyyy,

            }),
            dataType: "json",
            success: function (data) {
                console.log("ReimbursementAPI", data);
                //return;
                if (data.length > 0) {
                    var waitingList = '',
                        approvedList = '';
                    for (var i = 0; i < data.length; i++) {
                        if (data[i].STATUS == 'Approve') {

                            var c = data[i].CREATED_DATE;
                            var CREATED_DATE = c.split(" ")[0];
                            var d = data[i].RIMDATE;
                            var RIMDATE = c.split(" ")[0]
                            var e = data[i].RIMTODATE;
                            var RIMTODATE = c.split(" ")[0]
                            approvedList += "<tr>"
                            approvedList += "<td>" + data[i].RIMTYPE + "</td>"
                            //rev Pratik
                            //approvedList += "<td>" + CREATED_DATE + "</td>"
                            //approvedList += "<td>" + RIMDATE + "</td>"
                            //approvedList += "<td>" + RIMTODATE + "</td>"

                            approvedList += "<td>" + CREATED_DATE + "</td>"
                            approvedList += "<td>" + RIMDATE + "</td>"
                            approvedList += "<td>" + RIMTODATE + "</td>"
                            //End Of rev Pratik
                            approvedList += "<td class='text-center'><i class='fa fa-check text-success'></i></td>"
                            approvedList += "<td class='text-center'><i class='lni-trash' style='font-size:18px;color:#de4b4b;display:none'></i></td> </tr>"
                        } else if (data[i].STATUS == 'Rejected') { } else {
                            var c = data[i].CREATED_DATE;
                            var CREATED_DATE = c.split(" ")[0];
                            var d = data[i].RIMDATE;
                            var RIMDATE = c.split(" ")[0]
                            var e = data[i].RIMTODATE;
                            var RIMTODATE = c.split(" ")[0]
                            waitingList += "<tr>"
                            waitingList += "<td>" + data[i].RIMTYPE + "</td>"
                            //rev Pratik
                            //waitingList += "<td>" + CREATED_DATE + "</td>"
                            //waitingList += "<td>" + RIMDATE + "</td>"
                            //waitingList += "<td>" + RIMTODATE + "</td>"
                            //waitingList += "<td class='text-center'><i class='fa fa-exclamation-circle text-info'></i></td>"
                            //waitingList += "<td class='text-center'><i class='lni-trash' style='font-size:18px;color:#de4b4b;display:none'></i></td> </tr>"

                            waitingList += "<td>" + CREATED_DATE + "</td>"
                            waitingList += "<td>" + RIMDATE + "</td>"
                            waitingList += "<td>" + RIMTODATE + "</td>"
                            waitingList += "<td class='text-center'><i class='fa fa-exclamation-circle text-info'></i></td>"
                            waitingList += "<td class='text-center'>"
                            if (data[i].isDelete == 0) {
                                //leaveList += "<i class='lni-trash' style='font-size:18px;color:#de4b4b;display:none'></i></td>"
                            } else {
                                waitingList += "<i class='lni-trash' onClick='makeDeleteReq(" + data[i].ID + ")' style='font-size:18px;color:#de4b4b;'></i>"
                            }
                            if (data[i].isEdit == 0) {
                                //wfheList += "<i class='lni-trash' style='font-size:18px;color:#de4b4b;display:none'></i></td>"
                            } else {
                                waitingList += "<a href='#applyRemEdit' onClick='makeEditReq(" + data[i].ID + ")' class=modal-effect btn btn-az-secondary btn-rounded btn-block' data-toggle='modal' data-effect='effect-sign'><i class='lni-pencil' style='font-size:18px;color:Blue;'></i></a>"
                            }

                            waitingList += "</td></tr>"
                            //End of rev Pratik
                        }
                        $("#REMAwaitingTbl").html(waitingList);
                        $("#REMappTbl").html(approvedList)
                    }
                } else {
                    $("#REMAwaitingTbl").html("<tr><td colspan='6'>No Data to Display</td></tr>");
                    $("#REMappTbl").html("<tr><td colspan='6'>No Data to Display</td></tr>")
                } 
            }
        });
    }
    $(document).ready(function () {
        var days = ['Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday'];
        var monthNames = ["January", "February", "March", "April", "May", "June",
  "July", "August", "September", "October", "November", "December"
        ];
        var dt = new Date();
        var currentMonth = (dt.getMonth() + 1).toString().padStart(2, "0");
        $("#BMmonth").val(currentMonth);


        var BMStatus = $("#BMStatus").val(),
            BMmonth = $("#BMmonth").val(),
            BMyear = $("#BMyear").val();
        getList(BMStatus, BMmonth, BMyear);
        var dayC = dt.getDate();
        var monthC = monthNames[dt.getMonth()];
        var yrC = dt.getFullYear();
        var dayName = days[dt.getDay()];

        $("#calDate").text(dayC);
        $("#calMonth").text(monthC);
        $("#calYear").text(yrC);
        $("#calDayname").text(dayName);
        
        $("input#RMFareAmt, input#RMRefreshAmt").change(function () {
            var RMFareAmt = $("#RMFareAmt").val();
            var RMRefreshAmt = $("#RMRefreshAmt").val();

            var total = (parseFloat(RMFareAmt) + parseFloat(RMRefreshAmt)).toFixed(2);
            if (total == null || total == undefined || total == "NaN") {
                $("#RMTotalAmt").val("0.00");
            } else {
                $("#RMTotalAmt").val(total);
            }
            
        })
    })
    $(document).on('input', '.numeric', function (event) {
        if (this.value.length === 1) { this.value = '0' + this.value; }
        this.value = parseFloat(this.value.replace(/[^\d]/g, '').replace(/(\d\d?)$/, '.$1')).toFixed(2);
    });

    function ApplyRM() {
        var RMFrom = changeDatetoYYMMDD($("#RMFrom").val()),
            RMTo = changeDatetoYYMMDD($("#RMTo").val()),
            RMType = $("#RMType").val(),
            RMCat = $("#RMCat").val(),
            RMFareAmt = $("#RMFareAmt").val(),
            RMRefreshAmt = $("#RMRefreshAmt").val(),
            RMTotalAmt = $("#RMTotalAmt").val(),
            RMRemarks = $("#RMRemarks").val();
        if (RMType == '') {
            $("#msgArea").text("Type is Required")
            return;
        } else if (RMCat == '') {
            $("#msgArea").text("Category is Required")
            return;
        } else if (RMFareAmt == '') {
            $("#msgArea").text("Fare Amount is Required")
            return;
        } else if (RMRemarks == '') {
            $("#msgArea").text("Remarks is Required")
            return;
        }

        $.ajax({
            type: "POST",
            url: "/EmployeeSelfService/Api/ReimbursementAPI/ApplyRM",
            contentType: "application/json; charset=utf-8",
            data: JSON.stringify({
                "EMP_CODE": '@Session["usercontactID"]',
                "RIMDATE": RMFrom,
                "RIMTODATE": RMTo,
                "RIMTYPE": RMType,
                "RIMCAT": RMCat,
                "FARE_AMT": RMFareAmt,
                "REFRESH_AMT": RMRefreshAmt,
                "TOTAL_AMT": RMTotalAmt,
                "REMARKS": RMRemarks
            }),
            dataType: "json",
            success: function (data) {
                //console.log("BusinessMeetingAPI", data);
                console.log("ApplyRM", data);
                //return;
                if (data.status == 200) {
                    $("#applyRem").modal("hide");
                    $.confirm({
                        title: 'Success',
                        content: 'Applied successfully',
                        icon: 'fa fa-smile-o',
                        theme: 'modern',
                        closeIcon: true,
                        animation: 'scale',
                        type: 'blue',
                    });
                    filterDataByserach()
                }

            }
        });
    }
    function getCAtegories() {
        $.ajax({
            type: "POST",
            url: "/EmployeeSelfService/Api/ReimbursementAPI/GetRMCAT",
            contentType: "application/json; charset=utf-8",
            data: JSON.stringify({}),
            dataType: "json",
            success: function (data) {
                console.log("GetRMCAT", data);
                populateCategories(data)
            }
        })
    }
    function getTypes() {
        $.ajax({
            type: "POST",
            url: "/EmployeeSelfService/Api/ReimbursementAPI/GetRMTYPES",
            contentType: "application/json; charset=utf-8",
            data: JSON.stringify({}),
            dataType: "json",
            success: function (data) {
                console.log("GetRMTYPES", data);
                populateTypes(data)
            }
        })
    }
    getCAtegories();
    getTypes();
    function populateCategories(data){
        if (data.length > 0) {
            var catHtml = "<option label='Choose one' value=''>Select</option>";
            for (i = 0; i < data.length; i++) {
                catHtml += "<option value='" + data[i].CATNAME + "'>" + data[i].CATNAME + "</option>"
            }
            $("#RMCat").html(catHtml);
            $("#RMCatEdit").html(catHtml);
        }
    }
    function populateTypes(data) {
        if (data.length > 0) {
            var typeHtml = "<option label='Choose one' value=''>Select</option>";
            for (i = 0; i < data.length; i++) {
                typeHtml += "<option value='" + data[i].TYPENAME + "'>" + data[i].TYPENAME + "</option>"
            }
            $("#RMType").html(typeHtml);
            $("#RMTypeEdit").html(typeHtml);
        }
    }
    function changeDatetoYYMMDD(date) {
        var d = date.split("-");
        var day = d[0];
        var month = d[1]
        var year = d[2]
        return year+ '-' + month+ '-' + day

    }

    function filterDataByserach(){
        var BMStatus = $("#BMStatus").val(),
            BMmonth =$("#BMmonth").val(),
            BMyear = $("#BMyear").val();
        getList(BMStatus, BMmonth, BMyear);
    }

    $.ajax({
        type: "POST",
        url: "/EmployeeSelfService/Api/GetSupervisor/GetSupervisorName",
        contentType: "application/json; charset=utf-8",
        dataType: "json",
        data: JSON.stringify({
            "userID": '@Session["userid"]'
        }),
        success: function (data) {
            console.log("GetSupervisor", data);
            if (data.length > 0) {
                $("#superName").val(data[0].spName)
                $("#superEmail").val(data[0].spEmail)
                $("#superNameEdit").val(data[0].spName)
                $("#superEmailEdit").val(data[0].spEmail)
                //$("#superId").val(data[0].spId);
            }

        }
    });
    //rev Pratik

    function makeDeleteReq(ID) {
        //alert(ID)
        $.confirm({
            title: 'Confirm!',
            content: 'Are you sure you want to delete',
            buttons: {
                confirm: {
                    text: 'Yes',
                    btnClass: 'btn-blue',
                    action: function () {
                        $.ajax({
                            type: "POST",
                            url: "/EmployeeSelfService/Api/ReimbursementAPI/DeleteEmpReimbursement",
                            contentType: "application/json; charset=utf-8",
                            dataType: "json",
                            data: JSON.stringify({
                                "ID": ID
                            }),
                            success: function (data) {
                                console.log("DeleteEmpReimbursement", data);
                                if (data.status == 200) {
                                    $("#applyRem").modal("hide");
                                    $.confirm({
                                        title: 'Success',
                                        content: 'Deleted successfully',
                                        icon: 'fa fa-smile-o',
                                        theme: 'modern',
                                        closeIcon: true,
                                        animation: 'scale',
                                        type: 'blue',
                                    });
                                    filterDataByserach()
                                }

                            }
                        });
                    }
                },
                cancel: function () {
                    // cancel code
                }
            }
        });
    }

    function makeEditReq(ID) {
        //alert(ID)
        $.ajax({
            type: "POST",
            url: "/EmployeeSelfService/Api/UserInfo/getInfobyReimbursementid",
            contentType: "application/json; charset=utf-8",
            data: JSON.stringify({
                "UserId": ID,
                "EmpCode": '@Session["usercontactID"]'
            }),
            dataType: "json",
            asynch: false,
            success: function (data) {

                console.log(data);
                $("#applyRemEdit").modal("show");
                $("#msgAreaEdit").text("");
                var dateSplitFrom = data.Reimbursmentdetinfo.RIMDATE.split(" ")[0].split("/").join("-");
                var dateSplitTo = data.Reimbursmentdetinfo.RIMTODATE.split(" ")[0].split("/").join("-");
                var chunks = dateSplitFrom.split('-');
                dateSplitFrom = chunks[1] + '-' + chunks[0] + '-' + chunks[2];
                chunks = dateSplitTo.split('-');
                dateSplitTo = chunks[1] + '-' + chunks[0] + '-' + chunks[2];
                ////// alert(dateSplitFrom)
                $("#Rem_ID").text(data.Reimbursmentdetinfo.ID);
                $("#RMFromEdit").val(dateSplitFrom);
                $("#RMToEdit").val(dateSplitTo);
                $("#RMTypeEdit").val(data.Reimbursmentdetinfo.RIMTYPE);
                $("#RMCatEdit").val(data.Reimbursmentdetinfo.RIMCAT);
                $("#RMFareAmtEdit").val(data.Reimbursmentdetinfo.FARE_AMT);
                $("#RMRefreshAmtEdit").val(data.Reimbursmentdetinfo.REFRESH_AMT);
                $("#RMTotalAmtEdit").val(data.Reimbursmentdetinfo.TOTAL_AMT);
                $("#RMRemarksEdit").val(data.Reimbursmentdetinfo.REMARKS);
            }
        });
    }
    function ApplyRMEdit() {
        var RMFrom = changeDatetoYYMMDD($("#RMFromEdit").val()),
            RMTo = changeDatetoYYMMDD($("#RMToEdit").val()),
            RMType = $("#RMTypeEdit").val(),
            RMCat = $("#RMCatEdit").val(),
            RMFareAmt = $("#RMFareAmtEdit").val(),
            RMRefreshAmt = $("#RMRefreshAmtEdit").val(),
            RMTotalAmt = $("#RMTotalAmtEdit").val(),
            RMRemarks = $("#RMRemarksEdit").val();
        var ToDaydate = new Date();
        var dateFrom = new Date(RMFrom);
        var dateTo = new Date(RMTo);
        //alert(ToDaydate + ' ' + dateFrom)
        if (dateFrom > dateTo) {
            alert("To date should be greater then from date.");
            return false;
        }
        if (ToDaydate >= dateFrom) {
            alert("From date should be greater then todays date.");
            return false;
        }
        if (RMType == '') {
            $("#msgAreaEdit").text("Type is Required")
            return;
        } else if (RMCat == '') {
            $("#msgAreaEdit").text("Category is Required")
            return;
        } else if (RMRemarks == '') {
            $("#msgAreaEdit").text("Remarks is Required")
            return;
        }
        var ID = $("#Rem_ID").text();
        $.ajax({
            type: "POST",
            url: "/EmployeeSelfService/Api/ReimbursementAPI/ApplyRMEdit",
            contentType: "application/json; charset=utf-8",
            data: JSON.stringify({
                "ID": ID,
                "EMP_CODE": '@Session["usercontactID"]',
                "RIMDATE": RMFrom,
                "RIMTODATE": RMTo,
                "RIMTYPE": RMType,
                "RIMCAT": RMCat,
                "FARE_AMT": RMFareAmt,
                "REFRESH_AMT": RMRefreshAmt,
                "TOTAL_AMT": RMTotalAmt,
                "REMARKS": RMRemarks
            }),
            dataType: "json",
            success: function (data) {
                //console.log("BusinessMeetingAPI", data);
                //console.log("applyRemEdit", data);
                //return;
                if (data.status == 200) {
                    $("#applyRemEdit").modal("hide");
                    $("#msgAreaEdit").text("");
                    $.confirm({
                        title: 'Success',
                        content: 'Applied successfully',
                        icon: 'fa fa-smile-o',
                        theme: 'modern',
                        closeIcon: true,
                        animation: 'scale',
                        type: 'blue',
                    });
                    filterDataByserach()
                }

            }
        });
    }
    //End of rev Pratik
</script>
<div class="az-content az-content-profile">
    <div class="container-fluid mn-ht-100p">
        <div class="az-content-left az-content-left-profile">

            <div class="az-profile-overview">
                <div class="az-contact-info-header noborder">
                    <div class="media">
                        <div class="az-avatar avatar-xxl firstL">

                        </div>
                        <div class="media-body">
                            <h5 class="userName"></h5>
                            <p class="desg"></p>
                        </div><!-- media-body -->
                    </div><!-- media -->
                </div>

                <div class="az-profile-bio">
                    <a href="#applyRem" class="modal-effect btn btn-az-secondary btn-rounded btn-block" data-toggle="modal" data-effect="effect-sign">Apply Reimbursement</a>
                </div><!-- az-profile-bio -->

                <div class="mg-y-30"></div>
                <!-- Event Calender -->
                <div class="card card-dashboard-calendar">
                    <!-- <h6 class="card-title">Event Calendar</h6> -->
                    <div class="media az-media-date">
                        <h1 id="calDate"></h1>
                        <div class="media-body">
                            <p><span id="calMonth" style="display:inline-block"></span> <span id="calYear" style="display:inline-block"></span> </p>
                            <span id="calDayname">Monday</span>
                        </div>
                    </div>
                    <div class="card-body"><div class="fc-datepicker"></div></div>
                </div>  <!-- Event Calender End -->
                <div class="card mg-t-10 ">
                    <div class="card-body">
                        <button class="btn btn-light btn-radius btn-block btn-with-icon"><i class="lni lni-calendar"></i> Reimbursement Policy </button>
                    </div>
                </div>
            </div><!-- az-profile-overview -->

        </div><!-- az-content-left -->
        <div class="az-content-body az-content-body-profile">
            <div class="pd-10 pl-4 pd-sm-10 bg-gray-200 wd-xl-75p">
                <div class="row row-xs">
                    <div class="col-md-3 mg-t-10 mg-md-t-0">
                        <label>Status</label>
                        <select class="form-control" id="BMStatus">
                            <option value="">ALL</option>
                            <option value="Approve">Approved</option>
                            <option value="Waiting for Approval">Waiting</option>
                            <option value="Rejected">Rejected</option>
                        </select>
                    </div><!-- col -->
                    <div class="col-md-3">
                        <label>Month</label>
                        <select class="form-control" id="BMmonth">
                            <option value="">Select</option>
                            <option value="01">Jan</option>
                            <option value="02">Feb</option>
                            <option value="03">Mar</option>
                            <option value="04">Apr</option>
                            <option value="05">May</option>
                            <option value="06">June</option>
                            <option value="07">July</option>
                            <option value="08">Aug</option>
                            <option value="09">Sept</option>
                            <option value="10">Oct</option>
                            <option value="11">Nov</option>
                            <option value="12">Dec</option>
                        </select>
                    </div><!-- col -->
                    <div class="col-md-3 mg-t-10 mg-md-t-0">
                        <label>Year</label>
                        <select class="form-control" id="BMyear">
                            <option value="2021">2021</option>
                            <option value="2020">2020</option>
                        </select>
                    </div><!-- col -->
                    <div class="col-md mg-t-10 mg-md-t-0">
                        <label>&nbsp;</label>
                        <button class="btn btn-az-primary btn-block" onclick="filterDataByserach()">Search</button>
                    </div><!-- col -->
                </div><!-- row -->
            </div>
            <nav class="nav az-nav-line">
                <a href="" class="nav-link active" data-toggle="tab">Awaiting Approval </a>
            </nav>
            <div class="az-profile-body pt-0">
                <div class="row mg-b-20">
                    <div class="col-sm-12">
                        <table class="table table-bordered mg-b-0 table-padded">
                            <thead>
                                <tr>
                                    <th>Reimbursement Type</th>
                                    <th>Application Date</th>
                                    <th>From</th>
                                    <th>To</th>
                                    <th class="text-center">Status</th>
                                    <th class="text-center">Action</th>
                                </tr>
                            </thead>
                            <tbody id="REMAwaitingTbl">
                                
                            </tbody>
                        </table>
                    </div>
                </div><!-- row -->

                <div class="mg-b-20"></div>
            </div><!-- az-profile-body -->
            <nav class="nav az-nav-line">
                <a href="" class="nav-link active" data-toggle="tab">Approved </a>
            </nav>
            <div class="az-profile-body pt-0">
                <div class="row mg-b-20">
                    <div class="col-sm-12">
                        <table class="table table-bordered mg-b-0 table-padded">
                            <thead>
                                <tr>
                                    <th>Reimbursement Type</th>
                                    <th>Application Date</th>
                                    <th>From</th>
                                    <th>To</th>
                                    <th class="text-center">Status</th>
                                    <th class="text-center">Action</th>
                                </tr>
                            </thead>
                            <tbody id="REMappTbl">
                            </tbody>
                        </table>
                    </div>
                </div><!-- row -->

            </div><!-- az-profile-body -->
        </div><!-- az-content-body -->
    </div><!-- container -->
</div><!-- az-content -->
<!-- Reimbursement Apply Modal -->
<div id="applyRem" class="modal">
    <div class="modal-dialog modal-dialog-centered" role="document">
        <div class="modal-content modal-content-demo">
            <div class="modal-header">
                <h6 class="modal-title"> Apply Reimbursement</h6>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <div>
                    <div id="msgArea" class="red"></div>
                    <div class="form-group">
                        <div class="row">
                            <div class="col-sm-6">
                                <label class="az-content-label tx-11 tx-medium tx-gray-600"> Date applying for</label>
                                <div class="input-group">
                                    <input type="text" class="form-control fc-datepicker" placeholder="DD/MM/YYYY" id="RMFrom">
                                    <div class="input-group-append selectDateIcon">
                                        <div class="input-group-text">
                                            <i class="typcn typcn-calendar-outline tx-24 lh--9 op-6"></i>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-sm-6">
                                <label class="az-content-label tx-11 tx-medium tx-gray-600"> Date applying for</label>
                                <div class="input-group">
                                    <input type="text" class="form-control fc-datepicker" placeholder="DD/MM/YYYY" id="RMTo">
                                    <div class="input-group-append selectDateIcon">
                                        <div class="input-group-text">
                                            <i class="typcn typcn-calendar-outline tx-24 lh--9 op-6"></i>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            

                        </div>
                    </div>
                    <div class="form-group">
                        <div class="row">
                            <div class="col-sm-6">
                                <label class="az-content-label tx-11 tx-medium tx-gray-600">Type</label>
                                <div>
                                    <select class="form-control" style="width:100%" id="RMType"></select>
                                </div>
                            </div>
                            <div class="col-sm-6">
                                <label class="az-content-label tx-11 tx-medium tx-gray-600">Category</label>
                                <div>
                                    <select class="form-control" style="width:100%" id="RMCat"></select>
                                </div>
                            </div>
                            
                        </div>
                    </div>
                    <div class="form-group">
                        <div class="row">
                            <div class="col-sm-4">
                                <label class="az-content-label tx-11 tx-medium tx-gray-600">Fare Amount <span class="red">*</span></label>
                                <div class="input-group">
                                    <input class="form-control" type="text" value="0.00" id="RMFareAmt" required>
                                </div>
                            </div>
                            <div class="col-sm-4">
                                <label class="az-content-label tx-11 tx-medium tx-gray-600">Refreshment Amount</label>
                                <div class="input-group">
                                    <input class="form-control" type="text" value="0.00" id="RMRefreshAmt">
                                </div>
                            </div>
                            <div class="col-sm-4">
                                <label class="az-content-label tx-11 tx-medium tx-gray-600">Total Amount</label>
                                <div class="input-group">
                                    <input class="form-control " type="text" value="0.00" id="RMTotalAmt" disabled>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="form-group">
                        <div class="row">
                            <div class="col-sm-6">
                                <label class="az-content-label tx-11 tx-medium tx-gray-600">Supervisor's Name</label>
                                <div class="input-group">
                                    <input class="form-control" placeholder="" id="superName" type="text" disabled>
                                </div>
                            </div>
                            <div class="col-sm-6">
                                <label class="az-content-label tx-11 tx-medium tx-gray-600">Supervisor's Email</label>
                                <div class="input-group">
                                    <input class="form-control" placeholder="" id="superEmail" type="text" disabled>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="az-content-label tx-11 tx-medium tx-gray-600" >Remarks <span class="red">*</span></label>
                        <div>
                            <textarea rows="3" class="form-control" placeholder="Details" id="RMRemarks" required></textarea>
                        </div>
                    </div>
                </div>
                <div class="modal-footer slick">
                    <button type="button" class="btn btn-indigo btn-rounded" onclick="ApplyRM()">Submit Application</button>
                    <button type="button" class="btn btn-danger btn-rounded" data-dismiss="modal">Close</button>
                </div>
            </div>
        </div><!-- modal-dialog -->
    </div><!-- modal -->
</div>
<!-- Reimbursement Apply Edit Modal -->
<div id="applyRemEdit" class="modal">
    <div class="modal-dialog modal-dialog-centered" role="document">
        <div class="modal-content modal-content-demo">
            <div class="modal-header">
                <h6 class="modal-title"> Edit Reimbursement</h6>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <div>
                    <div id="msgAreaEdit" style="color:red"></div>
                    <div class="form-group">
                        <div class="row">
                            <div class="col-sm-6">
                                <label class="az-content-label tx-11 tx-medium tx-gray-600"> Date applying for</label>
                                <input type="hidden" id="Rem_ID" />
                                <div class="input-group">
                                    <input type="text" class="form-control fc-datepicker" placeholder="DD/MM/YYYY" id="RMFromEdit">
                                    <div class="input-group-append selectDateIcon">
                                        <div class="input-group-text">
                                            <i class="typcn typcn-calendar-outline tx-24 lh--9 op-6"></i>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-sm-6">
                                <label class="az-content-label tx-11 tx-medium tx-gray-600"> Date applying for</label>
                                <div class="input-group">
                                    <input type="text" class="form-control fc-datepicker" placeholder="DD/MM/YYYY" id="RMToEdit">
                                    <div class="input-group-append selectDateIcon">
                                        <div class="input-group-text">
                                            <i class="typcn typcn-calendar-outline tx-24 lh--9 op-6"></i>
                                        </div>
                                    </div>
                                </div>
                            </div>


                        </div>
                    </div>
                    <div class="form-group">
                        <div class="row">
                            <div class="col-sm-6">
                                <label class="az-content-label tx-11 tx-medium tx-gray-600">Type</label>
                                <div>
                                    <select class="form-control" style="width:100%" id="RMTypeEdit"></select>
                                </div>
                            </div>
                            <div class="col-sm-6">
                                <label class="az-content-label tx-11 tx-medium tx-gray-600">Category</label>
                                <div>
                                    <select class="form-control" style="width:100%" id="RMCatEdit"></select>
                                </div>
                            </div>

                        </div>
                    </div>
                    <div class="form-group">
                        <div class="row">
                            <div class="col-sm-4">
                                <label class="az-content-label tx-11 tx-medium tx-gray-600">Fare Amount</label>
                                <div class="input-group">
                                    <input class="form-control" type="text" placeholder="0.00" id="RMFareAmtEdit">
                                </div>
                            </div>
                            <div class="col-sm-4">
                                <label class="az-content-label tx-11 tx-medium tx-gray-600">Refreshment Amount</label>
                                <div class="input-group">
                                    <input class="form-control" type="text" placeholder="0.00" id="RMRefreshAmtEdit">
                                </div>
                            </div>
                            <div class="col-sm-4">
                                <label class="az-content-label tx-11 tx-medium tx-gray-600">Total Amount</label>
                                <div class="input-group">
                                    <input class="form-control numeric" type="text" placeholder="0.00" id="RMTotalAmtEdit">
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="form-group">
                        <div class="row">
                            <div class="col-sm-6">
                                <label class="az-content-label tx-11 tx-medium tx-gray-600">Supervisor's Name</label>
                                <div class="input-group">
                                    <input class="form-control" placeholder="" id="superNameEdit" type="text" readonly="readonly">
                                </div>
                            </div>
                            <div class="col-sm-6">
                                <label class="az-content-label tx-11 tx-medium tx-gray-600">Supervisor's Email</label>
                                <div class="input-group">
                                    <input class="form-control" placeholder="" id="superEmailEdit" type="text" readonly="readonly">
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="az-content-label tx-11 tx-medium tx-gray-600">Remarks</label>
                        <div>
                            <textarea rows="3" class="form-control" placeholder="Details" id="RMRemarksEdit"></textarea>
                        </div>
                    </div>
                </div>
                <div class="modal-footer slick">
                    <button type="button" class="btn btn-indigo btn-rounded" onclick="ApplyRMEdit()">Submit Application</button>
                    <button type="button" class="btn btn-danger btn-rounded" data-dismiss="modal">Close</button>
                </div>
            </div>
        </div><!-- modal-dialog -->
    </div><!-- modal -->
</div>
    <script src="~/Areas/EmployeeSelfService/Resources/lib/jquery-ui/ui/widgets/datepicker.js"></script>
    <script src="~/Areas/EmployeeSelfService/Resources/lib/select2/js/select2.min.js"></script>
  
    <script>
        $(function () {
            'use strict'
            // Datepicker found in left sidebar of the page
            var highlightedDays = ['2018-5-10', '2018-5-11', '2018-5-12', '2018-5-13', '2018-5-14', '2018-5-15', '2018-5-16'];
            var date = new Date();

            $('.fc-datepicker').datepicker({
                showOtherMonths: true,
                selectOtherMonths: true,
                dateFormat: 'dd-mm-yy',
                beforeShowDay: function (date) {
                    //var m = date.getMonth(), d = date.getDate(), y = date.getFullYear();
                    //for (var i = 0; i < highlightedDays.length; i++) {
                    //    if ($.inArray(y + '-' + (m + 1) + '-' + d, highlightedDays) != -1) {
                    //        return [true, 'ui-date-highlighted', ''];
                    //    }
                    //}
                    return [true];
                }
            });
            $('.fc-datepicker').datepicker('setDate', new Date());
            // showing modal with effect
            $('.modal-effect').on('click', function (e) {
                e.preventDefault();
                var effect = $(this).attr('data-effect');
                $('#applyLeave').addClass(effect);
            });

            // hide modal with effect
            $('#applyLeave').on('hidden.bs.modal', function (e) {
                $(this).removeClass(function (index, className) {
                    return (className.match(/(^|\s)effect-\S+/g) || []).join(' ');
                });
            });
           
            // Datepicker
            $('.fc-datepicker').datepicker({
                dateFormat: 'dd/mm/yy',
                showOtherMonths: true,
                selectOtherMonths: true,
            });
            $('.selectDateIcon').click(function () {
                $(this).parent('.input-group').find('.fc-datepicker').focus();
            });

        });
    </script>

